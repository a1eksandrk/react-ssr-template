var y=Object.create;var p=Object.defineProperty;var S=Object.getOwnPropertyDescriptor;var C=Object.getOwnPropertyNames;var x=Object.getPrototypeOf,_=Object.prototype.hasOwnProperty;var w=(r,t,e,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of C(t))!_.call(r,o)&&o!==e&&p(r,o,{get:()=>t[o],enumerable:!(s=S(t,o))||s.enumerable});return r};var n=(r,t,e)=>(e=r!=null?y(x(r)):{},w(t||!r||!r.__esModule?p(e,"default",{value:r,enumerable:!0}):e,r));var a=n(require("node:path")),u=n(require("node:fs/promises")),v=n(require("react")),g=n(require("react-dom/server")),h=n(require("fastify")),b=n(require("@fastify/static"));var c=n(require("react"));var i=n(require("react")),f=require("react"),d=Counter=()=>{let[r,t]=(0,f.useState)(0);return i.default.createElement("div",{className:"counter"},i.default.createElement("span",{className:"counter__label"},r),i.default.createElement("div",{className:"counter__toolbar"},i.default.createElement("button",{onClick:()=>t(o=>o+1)},"Increment"),i.default.createElement("button",{onClick:()=>t(o=>o-1)},"Decrement")))};var l=App=()=>c.default.createElement("main",null,c.default.createElement("section",null,c.default.createElement("h1",null,"React SSR Template"),c.default.createElement(d,null)));var A=3e3,m=(0,h.default)({logger:!0});m.register(b.default,{root:a.default.resolve(process.cwd(),"public")});m.get("/",async(r,t)=>{try{let s=(await u.default.readFile(a.default.resolve(process.cwd(),"src/index.html"))).toString("utf8").replace('<div id="root"></div>',`<div id="root">${g.default.renderToString(v.default.createElement(l,null))}</div>`);return t.header("Content-Type","text/html").send(s)}catch(e){return m.log.error(e),t.code(500).send("An error occurred")}});var N=async()=>{try{await m.listen({port:A})}catch(r){m.log.error(r),process.exit(1)}};N();
